<template name="scorecardStatusPage">
  {{refresh}}
  <div id="scorecardStatus" class="container-fluid mt-1 pl-2" style="display: none">
    <div id="scorecardStatusPage-control" class="row mx-3">
      <span id="all-plot-buttons-grp" class="btn-group">
        <button id="backButton" type="button" class="back btn btn-primary rounded">
          <i class="fa-solid fa-arrow-left-long"></i>&nbsp;&nbsp;<strong>Back</strong>
        </button>
        <button id="gc-spacer" type="button" class="btn spacebutton"></button>
        <button id="gc-spacer" type="button" class="btn spacebutton"></button>
        <button id="gc-spacer" type="button" class="btn spacebutton"></button>
        <button id="gc-spacer" type="button" class="btn spacebutton"></button>
        <button
          id="refresh-scorecard"
          type="button"
          class="refresh-scorecard btn btn-primary rounded-pill"
        >
          <i class="fa-solid fa-arrows-rotate"></i>
        </button>
      </span>
    </div>
    <h1 class="mt-5 mx-5">Scorecard Status Panel</h1>
    <div id="statusPanel" class="row mt-4 mx-5">
      <table
        id="userTable"
        class="table table-condensed table-responsive table-sm border border-0"
        cellspacing="0"
      >
        <thead>
          <th class="bg-white">User Name</th>
        </thead>
        <tbody>
          {{#each userName in userNames}}
          <tr class="">
            <td class="bg-white align-top border-top border-black">
              <button
                type="button"
                id="{{userName}}-control"
                data-target="{{userName}}"
                class="btn btn-info btn-xs userName-control"
                role="button"
              >
                {{userName}}
              </button>
            </td>
            <td colspan="12" class="align-top bg-white border-top border-black">
              <div id="{{userName}}" class="bg-info-subtle" style="display: none">
                <table
                  id="{{userName}}-Table"
                  class="table table-condensed table-responsive table-sm"
                  cellspacing="0"
                >
                  <tbody>
                    {{#each name in names userName}}
                    <tr>
                      <td class="align-top bg-white border border-0">
                        <button
                          type="button"
                          id="{{userName}}-{{name}}-control"
                          class="btn btn-info btn-xs userName-name-control w-100"
                          data-target="{{userName}}-{{name}}"
                          role="button"
                        >
                          {{name}}
                        </button>
                      </td>
                      <td colspan="12" class="align-top bg-white border border-0">
                        <div
                          id="{{userName}}-{{name}}"
                          class="bg-info-subtle"
                          style="display: none"
                        >
                          <table
                            id="{{userName}}-{{name}}-Table"
                            class="table table-condensed table-responsive bg-white"
                          >
                            <thead>
                              <tr class="info">
                                <th
                                  class="bg-info-subtle border-top border-bottom border-black"
                                >
                                  Submitted
                                </th>
                                <th
                                  class="bg-info-subtle border-top border-bottom border-black"
                                >
                                  Processed
                                </th>
                                <th
                                  class="bg-info-subtle border-top border-bottom border-black"
                                >
                                  Status
                                </th>
                                <th
                                  class="bg-info-subtle border-top border-bottom border-black"
                                >
                                  View
                                </th>
                                <th
                                  class="bg-info-subtle border-top border-bottom border-black"
                                >
                                  Drop
                                </th>
                                <th
                                  class="bg-info-subtle border-top border-bottom border-black"
                                >
                                  Restore
                                </th>
                              </tr>
                            </thead>
                            <tbody>
                              {{#each submitted in submittedTimes userName name}}
                              {{#each processedAt in processedAtTimes userName name
                              submitted}}
                              <tr
                                class="{{statusType userName name submitted processedAt}}"
                              >
                                <td class="bg-white border-bottom border-black">
                                  {{timeStr submitted}}
                                </td>
                                <td class="bg-white border-bottom border-black">
                                  {{timeStr processedAt}}
                                </td>
                                <td class="bg-white border-bottom border-black">
                                  {{status userName name submitted processedAt}}
                                </td>
                                <td class="bg-white border-bottom border-black">
                                  <a
                                    href="{{visitLink userName name submitted processedAt}}"
                                    target="_blank"
                                    aria-label="Opens in new window"
                                    >display</a
                                  >
                                </td>
                                <td class="bg-white border-bottom border-black">
                                  <button
                                    type="button"
                                    class="btn btn-danger btn-xs drop-sc-instance"
                                    id="{{scid userName name submitted processedAt}}"
                                    data-user_name="{{userName}}"
                                    data-name="{{name}}"
                                    data-submit_time="{{submitted}}"
                                    data-run_time="{{processedAt}}"
                                  >
                                    Drop
                                  </button>
                                </td>
                                <td class="bg-white border-bottom border-black">
                                  <button
                                    type="button"
                                    class="btn btn-success btn-xs restore-sc-instance"
                                    id="{{scid userName name submitted processedAt}}"
                                    data-user_name="{{userName}}"
                                    data-name="{{name}}"
                                    data-submit_time="{{submitted}}"
                                    data-run_time="{{processedAt}}"
                                  >
                                    Restore Settings
                                  </button>
                                </td>
                              </tr>
                              {{/each}} {{/each}}
                            </tbody>
                          </table>
                        </div>
                      </td>
                    </tr>
                    {{/each}}
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
</template>
